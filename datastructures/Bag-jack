from typing import Iterable, Optional
from datastructures.ibag import IBag, T
from random import random

#windows key + period + semi-colon
#♠️ ♥️ ♦️ ♣️
#🃏🎮🏆
'''Ace logic: 
    if 21 - current card value >= 11:
        Ace value = 11
    else:
        Ace value = 1'''

class Bag(IBag[T]):
    def __init__(self, *cards: Optional[Iterable[T]]) -> None:
        self.card_counts = {}

    '''def create_deck(self):
        rank_list = ["A", "2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K"]
        suit_list = ["♠️", "♥️", "♦️", "♣️"]
        deck = []
        for suit in suit_list:
            for rank in rank_list:
                deck += rank_list[rank] + suit_list[suit]
        return deck'''

    def add(self, card: T) -> None:
        if card in self.card_counts:
            self.card_counts[card] += 1
        elif card == None:
            raise TypeError("None is not a card")
        else:
            self.card_counts[card] = 1

    def remove(self, card: T) -> None:
        if card in self.card_counts:
            count_before = self.card_counts[card]
            count_after = count_before - 1
            self.card_counts[card] = count_after
        else:
            raise ValueError("card not in bag")

    def count(self, card: T) -> int:
        counter = 0
        if card in self.card_counts:
            counter += self.card_counts[card]
            return counter
        else:
            return counter

    def __len__(self) -> int:
        length = 0
        for card in self.card_counts:
            length += self.card_counts[card]
        return length

    def distinct_card(self) -> int:
        distincts = set()
        for card in self.card_counts:
            distincts.add(card)
        return distincts

    def __contains__(self, card) -> bool:
        if card in self.card_counts:
            return True
        else:
            return False

    def clear(self) -> None:
        self.card_counts.clear()